ID of first query in session: 696877294

number of queries: 4

query evolution description:

The query is posted and then incrementally fine-tuned, e.g. extending SELECT and GROUP-BY clause.

user story:

For every Wikidata item that (a) is an instance of second-level administrative division of Poland (Q247073)
and is located in an administrative entity that is itself an instance of highest-level administrative division (province) in Poland (Q150093) 
it counts how many such items use each predicate.


query 1:

# Initial attempt.
SELECT ?var1 ( COUNT ( DISTINCT  ?var2  ) AS  ?var3  )
WHERE {
  ?var2  <http://www.wikidata.org/prop/direct/P31>  <http://www.wikidata.org/entity/Q247073> .
  ?var2  <http://www.wikidata.org/prop/direct/P131>  ?var4 .
  ?var4  <http://www.wikidata.org/prop/direct/P31>  <http://www.wikidata.org/entity/Q150093> .
  ?var2  ?var1  ?var5 .
}
GROUP BY  ?var1 


query 2:

SELECT ?var1  ?var1Label  ?var2Label  ?var3 ( COUNT ( DISTINCT  ?var4  ) AS  ?var5  )
WHERE {
  ?var4  <http://www.wikidata.org/prop/direct/P31>  <http://www.wikidata.org/entity/Q247073> .
  ?var4  <http://www.wikidata.org/prop/direct/P131>  ?var6 .
  ?var6  <http://www.wikidata.org/prop/direct/P31>  <http://www.wikidata.org/entity/Q150093> .
  ?var4  ?var1  ?var7 .
}
GROUP BY  ?var1  ?var1Label  ?var2Label  ?var3 


query 3:

SELECT ?var1  ?var1Label  ?var2Label  ?var3 ( COUNT ( DISTINCT  ?var4  ) AS  ?var5  )
WHERE {
  ?var4  <http://www.wikidata.org/prop/direct/P31>  <http://www.wikidata.org/entity/Q247073> .
  ?var4  <http://www.wikidata.org/prop/direct/P131>  ?var6 .
  ?var6  <http://www.wikidata.org/prop/direct/P31>  <http://www.wikidata.org/entity/Q150093> .
  ?var4  ?var1  ?var7 .
  ?var1Label  ?var2Label  ?var3 .
}
GROUP BY  ?var1  ?var1Label  ?var2Label  ?var3 


query 4:

# Fine-tuning the query.
timestamp: 2017-06-12 16:39:51 +00:00
SELECT ?var1  ?var1Label  ?var2Label  ?var3 ( COUNT ( DISTINCT  ?var4  ) AS  ?var5  )
WHERE {
  ?var4  <http://www.wikidata.org/prop/direct/P31>  <http://www.wikidata.org/entity/Q247073> .
  ?var4  <http://www.wikidata.org/prop/direct/P131>  ?var6 .
  ?var6  <http://www.wikidata.org/prop/direct/P31>  <http://www.wikidata.org/entity/Q150093> .
  ?var4  ?var1  ?var7 .
 SERVICE  <http://wikiba.se/ontology#label>   {
    <http://www.bigdata.com/rdf#serviceParam>  <http://wikiba.se/ontology#language>  "en".
  }
}
GROUP BY  ?var1  ?var1Label  ?var2Label  ?var3 
